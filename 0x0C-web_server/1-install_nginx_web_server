#!/usr/bin/env bash
# Bash script to install and configure Nginx on a new Ubuntu machine

# Update the package list
apt-get update -y

# Install Nginx
apt-get install nginx -y

# Make sure Nginx is listening on port 80
sed -i 's/listen 80 default_server;/listen 80 default_server reuseport;/' /etc/nginx/sites-available/default

# Restart Nginx (without using systemctl)
service nginx restart

# Create a simple HTML page with "Hello World!"
echo "<!DOCTYPE html>
<html>
  <head>
    <title>Hello World!</title>
  </head>
  <body>
    <h1>Hello World!</h1>
  </body>
</html>" > /var/www/html/index.html

# Test the configuration with curl
curl localhost
